<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Serial Project</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <div class="main-container">
      <div class="page-container" id="page-container">
        <div class="console-container">
          <div class="console-header">
            <h2>Console</h2>
            <div class="serial-connection">
              <button class="btn primary" id="connect-to-serial">
                Connect Serial Device
              </button>
              <select id="baudrate-select">
                <option value="9600">9600</option>
                <option value="19200">19200</option>
                <option value="38400">38400</option>
                <option value="57600">57600</option>
                <option value="115200" selected>115200</option>
                <option value="230400">230400</option>
                <option value="460800">460800</option>
                <option value="921600">921600</option>
              </select>
            </div>
            <button
              id="reload-button"
              class="reload-button"
              onclick="reloadPageWithCacheClear()"
            >
              <i class="fas fa-sync-alt"></i> Restart Console
            </button>
            <div class="toggle-container">
              <input type="checkbox" id="auto-scroll" checked />
              <label for="auto-scroll" class="toggle-btn">Auto-scroll</label>
            </div>
          </div>
          <div id="serial-messages-container">
            <div class="message"></div>
          </div>

          <!-- Send Command déplacé ici, sous la console -->
          <div class="input-container-cmd">
            <input
              type="text"
              id="command-input"
              placeholder="Enter command..."
            />
            <button class="btn primary" id="send-command">Send</button>
          </div>
        </div>

        <!-- Bouton LoRa Mode en bas à droite -->
        <div class="lora-toggle-btn" id="toggle-lora-panel">
          <i class="fas fa-chevron-left"></i>
        </div>
      </div>

      <!-- Panel commands-section qui arrive de la droite -->
      <div class="commands-section-panel" id="commands-section-panel">
        <div class="commands-section">
          <div class="panel-header">
            <h3>LoRa Control Panel</h3>
            <button class="close-panel-btn" id="close-panel">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="common-commands">
            <button class="btn secondary" id="transmission">
              Force Transmission
            </button>
            <button class="btn secondary" id="reset-device">Reset</button>
            <button class="btn secondary" id="help">Help</button>
          </div>

          <div class="lora-configuration">
            <h3>LoRa Transmission</h3>
            <div class="input-container">
              <label for="lora-channel">Channel : </label>
              <select id="lora-channel">
                <option value="868100000">868 100 000 Hz</option>
                <option value="868300000">868 300 000 Hz</option>
                <option value="868500000">868 500 000 Hz</option>
                <option value="867100000">867 100 000 Hz</option>
                <option value="867300000">867 300 000 Hz</option>
                <option value="867500000">867 500 000 Hz</option>
                <option value="867700000">867 700 000 Hz</option>
                <option value="867900000">867 900 000 Hz</option>
              </select>
            </div>

            <div class="input-container">
              <label for="lora-power"
                >Power (dBm) : <span id="lora-power-value"> 0</span></label
              >
              <input type="range" id="lora-power" min="-9" max="14" value="0" />
            </div>

            <div class="input-container">
              <label for="lora-sf">Spreading Factor : </label>
              <select id="lora-sf">
                <option value="7">SF7</option>
                <option value="8">SF8</option>
                <option value="9">SF9</option>
                <option value="10">SF10</option>
                <option value="11">SF11</option>
                <option value="12">SF12</option>
              </select>
            </div>

            <div class="input-container">
              <label for="lora-payload">Payload : </label>
              <input
                type="text"
                id="lora-payload"
                placeholder="Hex or Base64"
                value="01020304"
              />
            </div>

            <div class="lora-preview-container">
              <button class="btn primary" id="send-lora-command">
                Send LoRa
              </button>
              <input
                type="text"
                id="lora-command-preview"
                class="command-preview"
                value="LORA=868100000:0:7:01020304"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="snackbar" class=""></div>

    <script type="module" src="js/main.js"></script>
  </body>
</html>
